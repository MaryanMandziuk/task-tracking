{% extends 'base_account.html' %}

{% block content %}
    <form  method="post">
        {% csrf_token %}
        <div class="mdl-textfield mdl-js-textfield">
            <!-- <input class="mdl-textfield__input" type="email" style="color: white;" id="email" /> -->
            {{ form.email }}
            <label class="mdl-textfield__label" style="color: white;" for="email">Email</label>
            <span class="mdl-textfield__error">{{ form.email.errors }}</span>
        </div>
        <br>
        <br>
        <button type="submit" class="login-button mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">RESET</button>
    </form>

    <div class="help">
        <a href="{% url 'account:login' %}">Back to login</a>
    </div>

    <script>
        $('#email' ).keyup(function() {
            if ($('#email').val() !== "") {
                if  (! isEmail($('#email').val())) {
                    $('#email').parent().addClass('is-invalid');
                    $('#email').next().next().text("Incorrect email format!")
                } else {
                    $('#email').parent().removeClass('is-invalid');
                }
            }
        });
        $(document).ready(function() {
            if ($('#email').val() !== "") {
                if  (! isEmail($('#email').val())) {
                    $('#email').parent().addClass('is-invalid');
                    $('#email').next().next().text("Incorrect email format!")
                } else {
                    $('#email').parent().removeClass('is-invalid');
                }
            }
        });

        function isEmail(email) {
          var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
          return regex.test(email);
        }
    </script>
{% endblock %}
